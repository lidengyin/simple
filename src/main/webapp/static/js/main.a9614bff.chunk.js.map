{"version":3,"sources":["utils/storageUtils.js","utils/users.js","ajax/ajax.js","ajax/types.js","components/admin/admin.js","components/home/titles/titles.js","components/home/write/wirte.js","components/home/details/datails_son/datails_son.js","components/home/details/details.js","components/home/home.js","components/login/login.js","App.js","index.js"],"names":["saveWrite1","write1","store","set","saveWrite2","write2","getWrite1","get","getWrite2","removeWrite1","remove","removeWrite2","saveUser","user","getUser","removeUser","ajax","url","data","method","qs","stringify","Promise","resolve","reject","axios","params","post","setRequestProperty","then","response","console","log","catch","error","message","addNewUser","userName","password","adminUser","addComment","infos","addComments","messagedetail","getTitles","page","rows","desc","getSonDetails","mid","delComment","mids","Item","Admin","toLogin","props","history","push","handleSubmit","event","preventDefault","form","validateFields","err","values","a","result","flag","success","userinfo","storageUtils","User","replace","this","getFieldDecorator","className","onSubmit","prefix","type","style","color","placeholder","htmlType","onClick","Component","WrapAdmin","create","Title","state","total","titles","loading","deletemessage","setState","getDetail","record","getProducts","pageNum","clearTimeout","timeouter","callback","StorageUtils","reload","PubSub","subscribe","msg","columns","title","dataIndex","key","render","text","width","height","uid","id","size","disabled","rowKey","dataSource","pagination","showQuickJumper","onChange","current","TextArea","Write","contentCounts","commentCounts","content","comment","getDate","Date","time","getFullYear","getMonth","getHours","getMinutes","getSeconds","out","window","confirm","messageinfo","mtime","obj","mcontent","publish","onSubmit1","counterTitle","titleCounts","target","value","length","slice","counterContent","num","count","trim","display1","display2","fontSize","display","marginLeft","autosize","minRows","SonExampleComment","load","Datails","detailsReload","detail_id","detail_mid","detail","ui","comments","YorN","author","location","reverse","map","index","Home","path","component","to","Login","password2","result1","validatePwd","rule","test","rules","required","whitespace","min","max","validator","WrapLogin","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a9614bff.chunk.js","sourcesContent":["import store from 'store'\r\nconst USER_KEY = 'user_key'\r\nconst write1_KEY = 'write1_key'\r\nconst write2_KEY = 'write2_key'\r\nexport default {\r\n\r\n  /*\r\n    保存write状态\r\n   */\r\n  saveWrite1(write1){\r\n    store.set(write1_KEY, write1)\r\n  },\r\n  saveWrite2(write2){\r\n    store.set(write2_KEY, write2)\r\n  },\r\n  getWrite1(){\r\n    return store.get(write1_KEY) || {}\r\n  },\r\n  getWrite2(){\r\n    return store.get(write2_KEY) || {}\r\n  },\r\n  removeWrite1 () {\r\n    store.remove(write1_KEY)\r\n  },\r\n  removeWrite2 () {\r\n    store.remove(write2_KEY)\r\n  },\r\n\r\n  /*\r\n  保存user\r\n   */\r\n  saveUser (user) {\r\n    store.set(USER_KEY, user)\r\n  },\r\n\r\n  /*\r\n  读取user\r\n   */\r\n  getUser () {\r\n    return store.get(USER_KEY) || {}\r\n  },\r\n\r\n  /*\r\n  删除user\r\n   */\r\n  removeUser () {\r\n    store.remove(USER_KEY)\r\n  }\r\n}\r\n","export default {\r\n  user: {} // 保存当前登陆的user\r\n}\r\n","import qs from 'qs'\r\n\r\nimport axios from 'axios'\r\nimport {message} from 'antd'\r\n\r\n\r\n\r\nexport default function ajax(url,data={},method='GET',deFault=true) {\r\n\r\n    if(deFault){\r\n      data = qs.stringify(data)\r\n    }\r\n    return new Promise((resolve,reject)=>{\r\n        let promise\r\n        if(method==='GET'){\r\n          promise = axios.get(url,{\r\n            params:data\r\n          })\r\n        }else{\r\n          promise = axios.post(url,data,\r\n            {\r\n                setRequestProperty:(\"Content-Type\",\"application/x-javascript;charset=utf-8\")//发送json数据\r\n              })\r\n        }\r\n        promise.then(response =>{\r\n          console.log(response)\r\n          resolve(response.data)\r\n        }).catch(error =>{\r\n          message.error(\"请求错误\")\r\n        })\r\n      })\r\n}\r\n\r\n\r\n\r\n","import ajax from './ajax'\r\n//定义请求的方法\r\nconst Base = ''\r\n//注册\r\nexport const addNewUser = (userName,password) =>ajax(Base+'/admininfo/register',{userName,password},'POST',true)\r\n//登录\r\nexport const adminUser = (userName,password) =>ajax(Base+'/admininfo/login',{userName,password},'POST')\r\n//发表自己的留言\r\nexport const addComment = (infos) =>ajax(Base+'/messageinfo/commitmessage',infos,'POST',false)\r\n//发表评论\r\nexport const addComments = (messagedetail) =>ajax(Base+'/messageinfo/writecomment',messagedetail,'POST')\r\n//获取标题\r\nexport const getTitles = (page, rows,desc) =>ajax(Base+'/messageinfo/list',{page,rows,desc},'POST')\r\n//获取细目\r\nexport const getDetail = (mid) =>ajax(Base+'/messageinfo/getmessageinfo',{mid},'POST')\r\n//获取子评论\r\nexport const getSonDetails = (mid) =>ajax(Base+'/messageinfo/getmessagedetail',{mid},'POST')\r\n//删除留言\r\nexport const delComment = (mids) =>ajax(Base+'/messageinfo/deletemessage',{mids},'POST')\r\n\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {\r\n    Form,\r\n    Icon,\r\n    Input,\r\n    Button,\r\n    message\r\n} from 'antd'\r\n\r\nimport {adminUser} from '../../ajax/types'\r\nimport storageUtils from '../../utils/storageUtils'\r\nimport User from '../../utils/users'\r\nimport './admin.less'\r\n\r\nconst Item =Form.Item\r\n\r\nclass Admin extends Component {\r\n\r\n  toLogin = () =>{\r\n    this.props.history.push('/bbs1/login')\r\n  }\r\n\r\n  componentDidMount() {\r\n    storageUtils.removeUser()\r\n    storageUtils.removeWrite1()\r\n    storageUtils.removeWrite2()\r\n    User.user = {}\r\n  }\r\n\r\n  handleSubmit = (event)=>{\r\n    event.preventDefault() //阻止表单的默认行为\r\n    // 对所有表单字段进行检验\r\n    this.props.form.validateFields(async(err, values) => {\r\n      // 检验成功\r\n      if (values.userName && values.password) {\r\n        // 请求登陆\r\n        const result = await adminUser(values.userName, values.password)\r\n        if (result.flag === 1) { // 登陆成功\r\n          // 提示登陆成功\r\n          console.log(result)\r\n          message.success('登陆成功')\r\n          const user = result.userinfo // 保存在内存中\r\n          storageUtils.saveUser(user) // 保存到local中\r\n          User.user = user\r\n          // 跳转到管理界面 (不需要再回退回到登陆)\r\n          this.props.history.replace('/bbs1/home')\r\n        } else {\r\n          message.error('账户或密码不正确')\r\n        }\r\n      } else {\r\n        message.error('用户名和密码不能为空')\r\n      }\r\n    });\r\n  }\r\n\r\n    render() {\r\n        const form = this.props.form\r\n        const {getFieldDecorator} =form\r\n        return (\r\n          <div className=\"admin\">\r\n              <header className=\"admin-header\">\r\n                  <h1>BBS</h1>\r\n              </header>\r\n              <section className=\"admin-content\">\r\n                  <h2>用户登陆</h2>\r\n                  <Form onSubmit={this.handleSubmit} className=\"admin-form\">\r\n                    <Item>\r\n                      {\r\n                        getFieldDecorator('userName', {\r\n                        })(\r\n                          <Input\r\n                            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                            placeholder=\"用户名\"\r\n                          />\r\n                        )\r\n                      }\r\n                    </Item>\r\n                    <Item>\r\n                      {\r\n                        getFieldDecorator('password', {\r\n\r\n                        })(\r\n                          <Input\r\n                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                            type=\"password\"\r\n                            placeholder=\"密码\"\r\n                          />\r\n                        )\r\n                      }\r\n                    </Item>\r\n                      <Item>\r\n                          <Button type=\"primary\" htmlType=\"submit\" className=\"admin-form-button\">\r\n                              登录\r\n                          </Button>\r\n                      </Item>\r\n                    <Item>\r\n                      <Button type=\"primary\" onClick={this.toLogin} className=\"admin-form-button\">\r\n                        注册\r\n                      </Button>\r\n                    </Item>\r\n                  </Form>\r\n              </section>\r\n          </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrapAdmin = Form.create()(Admin)\r\nexport default WrapAdmin\r\n","import React, {Component} from 'react';\r\nimport {Table} from 'antd';\r\nimport {message} from 'antd'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport {getTitles,delComment} from '../../../ajax/types'\r\nimport StorageUtils from '../../../utils/storageUtils'\r\nimport './titles.less'\r\n\r\nexport default class Title extends Component {\r\n\r\n  state = {\r\n    total:10,      //总数\r\n    page:1,         //当前页数\r\n    titles : [],    //存放标题\r\n    loading:false,   //是否出现加载中图片\r\n    desc:0,     //正逆序，默认正序\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // 卸载异步操作设置状态\r\n    clearTimeout(this.timeouter)\r\n    this.setState = (state, callback) => {\r\n      return\r\n    }\r\n  }\r\n\r\n  //一开始挂起便请求标题，并修改state\r\n  async componentDidMount() {\r\n    StorageUtils.saveWrite1('block')\r\n    StorageUtils.saveWrite2('none')\r\n    let {page,desc} = this.state     //获取当前的页数\r\n    this.reload = PubSub.subscribe('reload',async (msg,data)=>{   //每当用户发表的文章的时候及时更新\r\n      if(data==='true'){\r\n        this.setState({loading:true})     //开始请求出现load\r\n        const result = await getTitles(page,10,desc)\r\n        this.setState({total:result.total,titles:result.rows,loading:false})\r\n      }\r\n    })\r\n    this.setState({loading:true})     //开始请求出现load\r\n    let result = await getTitles(page,10,desc) //发送请求当前页面的标题\r\n    this.setState({total:result.total,titles:result.rows,loading:false})  //请求完成取消load，以及改变state中的值\r\n  }\r\n\r\n  //删除留言\r\n  deletemessage = async (mids)=>{\r\n    const result = await delComment(mids+\",\")\r\n    if(result.flag === '1'){\r\n      message.success('删除成功')\r\n      const {page,desc} = this.state\r\n      this.setState({loading:true})     //开始请求出现load\r\n      const result = await getTitles(page,10,desc)\r\n      this.setState({total:result.total,titles:result.rows,loading:false})\r\n    }else{\r\n      message.error('删除失败')\r\n    }\r\n  }\r\n  //获取明细\r\n  getDetail = (record)=>{\r\n    this.props.history.push('/bbs1/home/detail',{record})\r\n\r\n  }\r\n\r\n  //获取页数\r\n  getProducts = async (pageNum)=>{\r\n    const {desc} = this.state\r\n    this.pageNum = pageNum\r\n    this.setState({page:pageNum})\r\n    this.setState({loading:true})//开始请求出现load\r\n    const result = await getTitles(pageNum,10,desc)\r\n    this.setState({total:result.total,titles:result.rows,loading:false})//请求完成取消load，以及改变state中的值\r\n  }\r\n\r\n\r\n    render() {\r\n      const {loading,total} = this.state\r\n\r\n      const columns = [\r\n        {\r\n          title: '标题',\r\n          dataIndex: 'title',\r\n          key:\"key\",\r\n          render:(text, record) => <a onClick={()=>this.getDetail(record)}>{text}</a>,//点击获取对应的id\r\n          width:'40%',\r\n          className:'Titles'\r\n        },\r\n        {\r\n          title: '作者',\r\n          dataIndex: 'ui.userName',\r\n          key: 'userName',\r\n          className:'Titles',\r\n          width:'20%'\r\n        },\r\n        {\r\n          title: '时间',\r\n          dataIndex: 'mtime',\r\n          key: 'date',\r\n          width:'30%',\r\n          className:'Titles'\r\n        },\r\n        {\r\n          title: \"\",\r\n          key: \"action\",\r\n          width:'10%',\r\n          height:'5%',\r\n          className:'Titles',\r\n          render: (text, record) => (\r\n            record.uid !== StorageUtils.getUser().id?\r\n              <a size=\"small\" disabled >删除</a> :\r\n              <a size=\"small\" onClick={()=>this.deletemessage(record.id)}>删除</a>\r\n          )\r\n        }\r\n      ]\r\n\r\n      const titles = this.state.titles\r\n\r\n      return (\r\n            <div className='title'>\r\n              <div className='title-div'>\r\n                <p className='title-p'>留言列表</p>\r\n              </div>\r\n                <Table\r\n                  rowKey='id'    //指定key为uid，可以自动设置为每个标题的key\r\n                  loading={loading}  //是否出现加载标志\r\n                  columns={columns}\r\n                  dataSource={titles}\r\n                  className='title-titles'\r\n                  pagination={{\r\n                    showQuickJumper: true, //快速跳转\r\n                    total, //总数\r\n                    onChange: this.getProducts ,//变化触发\r\n                    current: this.pageNum //当前页\r\n                  }}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport {Input,Button,message} from 'antd';\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport './wirte.less'\r\nimport {addComment,addComments} from '../../../ajax/types'\r\nimport storageUtils from '../../../utils/storageUtils'\r\n\r\nconst { TextArea } = Input;\r\n\r\nexport default class Write extends Component {\r\n    state = {\r\n        contentCounts:200,\r\n        commentCounts:100,\r\n        title:\"\",\r\n        content:\"\",\r\n        comment:\"\",\r\n        record:{}\r\n    }\r\n\r\n  componentWillUnmount() {\r\n    // 卸载异步操作设置状态\r\n    clearTimeout(this.timeouter)\r\n    this.setState = (state, callback) => {\r\n      return\r\n    }\r\n  }\r\n    //获取时间\r\n    getDate = (Date)=>{\r\n      var time = Date.getFullYear()+\"-\"\r\n      if(Date.getMonth()>9)\r\n        time = time+Date.getMonth()+\"-\"\r\n      else\r\n        time = time+\"0\"+Date.getMonth()+\"-\"\r\n      if(Date.getDate()>9)\r\n        time = time+Date.getDate()+\"  \"\r\n      else\r\n        time = time+\"0\"+Date.getDate()+\"  \"+Date.getHours()+\":\"+Date.getMinutes()+\":\"\r\n      if(Date.getHours()>9)\r\n        time = time+Date.getHours()+\":\"\r\n      else\r\n        time = time+\"0\"+Date.getHours()+\":\"\r\n      if(Date.getMinutes()>9)\r\n        time = time + Date.getMinutes() + \":\"\r\n      else\r\n        time = time + \"0\" + Date.getMinutes() + \":\"\r\n      if(Date.getSeconds()>9)\r\n        return time+Date.getSeconds()\r\n      else\r\n        return time+\"0\"+Date.getSeconds()\r\n    }\r\n\r\n    //退出\r\n    out = ()=>{\r\n      if(window.confirm('确定退出登录吗？')){\r\n        storageUtils.removeUser()\r\n        this.props.history.replace('/')\r\n      }\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.record = PubSub.subscribe('record',(msg,data)=>{\r\n        this.setState({record:data})\r\n      })\r\n    }\r\n\r\n  //发表留言\r\n    onSubmit = async ()=>{\r\n      const {title,content} = this.state\r\n      const messageinfo = {\r\n        title,\r\n        uid:storageUtils.getUser().id,\r\n        mtime:this.getDate(new Date()),\r\n        mid:storageUtils.getUser().id,\r\n      }\r\n      const messagedetail = {\r\n        //id:storageUtils.getUser().id,\r\n        mcontent:content\r\n      }\r\n      const obj = {\r\n        \"messageinfo\" : messageinfo,\r\n        \"messagedetail\" : messagedetail\r\n      }\r\n      //向后台发送数据\r\n      if(!title||!content){\r\n        message.error('标题和内容不能为空')\r\n      }else{\r\n          const result =await addComment(obj)\r\n          console.log(obj)\r\n        if(result.flag==='1'){\r\n          message.success('发表成功')\r\n          PubSub.publish(\"reload\",'true')\r\n          this.setState({title:'',content:'',contentCounts:200})\r\n        }else{\r\n          message.error('发表失败，请重新发表')\r\n        }\r\n      }\r\n    }\r\n\r\n    //发表评论\r\n  onSubmit1 = async ()=>{\r\n      const {record,comment} = this.state\r\n      console.log(\"haha\")\r\n      console.log(record)\r\n      if(comment){\r\n        const messagedetail = {\r\n          mcontent: comment,\r\n          id:storageUtils.getUser().id,  //评论者id\r\n          mid: record.id         //文章id\r\n        }\r\n        const result =await addComments(messagedetail)\r\n        console.log(result)\r\n        if(result.flag==='1'){\r\n          message.success('评论成功')\r\n          PubSub.publish(\"reload1\",'true')\r\n          this.setState({comment:'',commentCounts:100 })\r\n        }else{\r\n          message.error('评论失败，请重新评论')\r\n        }\r\n      }else{\r\n        message.error('评论内容不能为空')\r\n      }\r\n  }\r\n    //获取标题可写剩余字数\r\n    counterTitle = (event)=> {\r\n      let titleCounts = event.target.value + \"\"  //获取文本内容\r\n      if (titleCounts.length > 10) {\r\n        titleCounts = titleCounts.slice(0,10)\r\n      }\r\n      this.setState({title:titleCounts})\r\n    }\r\n\r\n    //获取文本框可写剩余字数\r\n    counterContent = (event,num)=> {\r\n      let contentCounts = event.target.value + \"\" //获取文本域的内容\r\n      let count\r\n      if (contentCounts.trim().length > num) {\r\n        contentCounts = contentCounts.slice(0, num)\r\n      } else {\r\n        count = num - contentCounts.trim().length           //计算还能输入字数\r\n      }\r\n      if (num === 200)\r\n        this.setState({contentCounts: count || 0, content: contentCounts})        //更新count\r\n      else\r\n        this.setState({commentCounts: count || 0, comment: contentCounts})        //更新count\r\n    }\r\n\r\n\r\n    render() {\r\n        const {contentCounts,title,content,comment,commentCounts} =this.state\r\n        const user = storageUtils.getUser()\r\n        const display1 = storageUtils.getWrite1()\r\n        const display2 = storageUtils.getWrite2()\r\n\r\n        return (\r\n          <div className='write'>\r\n            <div className='write-head'>\r\n              <p className='write-head-p font'>Hello  <span style={{fontSize:30,color:'#0074D9'}}>{user.userName}</span></p>\r\n              <p className='out' onClick={this.out}>退出登录</p>\r\n              <p className='write-head-p1 font'>欢迎登录BBS</p>\r\n            </div>\r\n            <div className='write-writting' style={{display:display1}}>\r\n              <h2>发表新留言</h2>\r\n              <div className='write-title'>\r\n                <span className='font'>标题：</span>\r\n                <Input className='write-title-input' placeholder='最多十位' onChange={this.counterTitle} value={title}/>\r\n              </div>\r\n              <div className='write-content'>\r\n                <p className='font' style={{marginLeft:'-200px'}}>留言内容：</p>\r\n                <TextArea\r\n                  autosize={{ minRows: 10}}\r\n                  className='write-content-input'\r\n                  onChange={(event)=>this.counterContent(event,200)}\r\n                  value={content}\r\n                />\r\n                <p className='tips'>还能输入{contentCounts}个字</p>\r\n              </div>\r\n              <br/>\r\n              <div className='write-footer'>\r\n                <Button type=\"primary\" onClick={this.onSubmit} className=\"write-button\">\r\n                  发表\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <div className='write-writting1' style={{display:display2}}>\r\n              <h2>添加新评论</h2>\r\n              <div className='write-content'>\r\n                <p className='font' style={{marginLeft:'-200px'}}>评论内容：</p>\r\n                <TextArea\r\n                  autosize={{ minRows: 6}}\r\n                  className='write-content-input'\r\n                  onChange={(event)=>this.counterContent(event,100)}\r\n                  value={comment}\r\n                />\r\n                <p className='tips'>还能输入{commentCounts}个字</p>\r\n                </div>\r\n              <br/>\r\n              <div className='write-footer'>\r\n                <Button type=\"primary\" onClick={this.onSubmit1} className=\"write-button\">\r\n                  发表\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport './details_son.less'\r\n\r\nexport default class SonExampleComment extends Component {\r\n\r\n    state = {\r\n        mid : 0,\r\n        comment :{},\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        this.setState({load:false})\r\n        // 卸载异步操作设置状态\r\n        clearTimeout(this.timeouter)\r\n        this.setState = (state, callback) => {\r\n            return\r\n        }\r\n    }\r\n    async componentDidMount() {\r\n        const mid = this.props.mid\r\n        const comment = this.props.comment\r\n        this.setState({mid,comment})\r\n    }\r\n\r\n    render() {\r\n        const {comment} = this.state\r\n        return (\r\n        <div className='detail-son'>\r\n            <p className='author'>匿名&nbsp;&nbsp;:</p>\r\n            <div className='comment'>\r\n                {comment.mcontent}\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\nSonExampleComment.propTypes = {\r\n    comment: PropTypes.object.isRequired,\r\n    mid: PropTypes.number.isRequired,\r\n    display1:PropTypes.string.isRequired\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport SonExampleComment from './datails_son/datails_son'\r\nimport {getSonDetails} from \"../../../ajax/types\"\r\nimport StorageUtils from '../../../utils/storageUtils'\r\nimport './details.less'\r\n\r\nexport default class Datails extends Component {\r\n\r\n    state = {\r\n      detailsReload:false,  //刷新\r\n      display1:'none',    //能否删除留言\r\n      detail_id:0,        //文章id\r\n      detail_mid:0,       //用户id\r\n      detail:{ui:{id:0,userName:\"\"},mtime:'',mcontent:'',title:''},\r\n      comments:[\r\n      ],\r\n      YorN:'none',\r\n      content: '',\r\n      comment:'',\r\n    }\r\n\r\n  componentWillUnmount() {\r\n    // 卸载异步操作设置状态\r\n    clearTimeout(this.timeouter)\r\n    this.setState = (state, callback) => {\r\n      return\r\n    }\r\n  }\r\n  //获取评论和对应的子评论\r\n  async componentDidMount (){\r\n    StorageUtils.saveWrite1('none')\r\n    StorageUtils.saveWrite2('block')\r\n    const author = this.props.location.state.record   //组件间的属性传递\r\n    PubSub.publish('record',author)\r\n    var detail_id = author.id                     //文章id\r\n    var detail_mid = author.uid                   //作者id\r\n    if(StorageUtils.getUser().id===detail_mid){\r\n      this.setState({display1:'block'})\r\n    }\r\n    var comments = await getSonDetails(detail_id)\r\n    console.log(comments)\r\n    if(comments.length>0){\r\n      const content = comments[0].mcontent\r\n      this.setState({content})\r\n    }\r\n    if(comments.length>1){\r\n      comments = comments.slice(1,comments.length).reverse()\r\n    }else{\r\n      comments = []\r\n    }\r\n    this.reload = PubSub.subscribe('reload1',async (msg,data)=>{\r\n      if(data === 'true'){\r\n        this.setState({comments:[]})\r\n        var comments = await getSonDetails(detail_id)\r\n        comments = comments.slice(1,comments.length).reverse()\r\n        this.setState({detail:author,detail_id,detail_mid,comments:comments})\r\n      }\r\n    })\r\n    this.setState({detail:author,detail_id,detail_mid,comments})\r\n}\r\n\r\n    render() {\r\n      const {comments,detail,content,display1} = this.state\r\n      let display = comments.length > 0 ? 'none' : 'block'\r\n      //子评论\r\n        return (\r\n          <div className=\"detail\">\r\n            <div className=\"detail-father\">\r\n              <p className='detail-title'>{detail.title}</p>\r\n              <p className='author'>{detail.ui.userName}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{detail.mtime}</p>\r\n              <div className='comment'>\r\n                <p >{content}</p>\r\n              </div>\r\n            </div>\r\n            <h1>评论：</h1>\r\n            <div className=\"detail-sons\">\r\n              <h2 style={{ display: display }} className='h2'>暂无评论，在左方添加评论！！！</h2>\r\n              <div className=\"detail-son\">\r\n                {\r\n                   comments.map((comment, index) => {\r\n                      return <SonExampleComment comment={comment} key={index} mid={comment.mid} display1={display1}/>\r\n                  })\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport {Route, Switch,Redirect} from 'react-router-dom'\r\n\r\nimport Title from './titles/titles'\r\nimport Write from './write/wirte'\r\nimport Datails from './details/details'\r\nimport User from '../../utils/users'\r\nimport './home.less'\r\nexport default class Home extends Component {\r\n\r\n  componentWillUnmount() {\r\n    // 卸载异步操作设置状态\r\n    clearTimeout(this.timeouter)\r\n    this.setState = (state, callback) => {\r\n      return\r\n    }\r\n  }\r\n\r\n  render() {\r\n    //判断是否是非法登录\r\n    if(!User.user.id){\r\n      return <Redirect to='/'/>\r\n    }\r\n        return (\r\n            <div className='home'>\r\n                <header className=\"home-header\">\r\n                    <h1>BBS</h1>\r\n                </header>\r\n                <div className='home-content'>\r\n                    <div className='home-content-right'>\r\n                        <Switch>\r\n                            <Route path='/bbs1/home/detail' component={Datails}/>\r\n                            <Route path='/' component={Title}/>\r\n                        </Switch>\r\n                    </div>\r\n                    <div className='home-content-left'>\r\n                        <Route path='/' component={Write}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport {\r\n    Form,\r\n    Icon,\r\n    Input,\r\n    Button,\r\n    message\r\n} from 'antd'\r\n\r\nimport {addNewUser,adminUser} from '../../ajax/types'\r\nimport storageUtils from '../../utils/storageUtils'\r\nimport User from '../../utils/users'\r\n\r\nimport './login.less'\r\n\r\nconst Item = Form.Item\r\n\r\nclass Login extends Component {\r\n\r\n    componentDidMount() {\r\n        storageUtils.removeUser()\r\n        storageUtils.removeWrite1()\r\n        storageUtils.removeWrite2()\r\n        User.user = {}\r\n    }\r\n\r\n    handleSubmit = (event) =>{\r\n        event.preventDefault() //阻止表单的默认行为\r\n        //收集表单数据并进行验证\r\n        this.props.form.validateFields(async (err,values) =>{\r\n            if(values.password!== values.password2){\r\n                message.error(\"两次密码不一样，请重新输入密码\")\r\n            }else{\r\n                if(!err){ //检验成功\r\n                    const {userName,password} = values\r\n                    const result = await addNewUser(userName,password)\r\n                    console.log(result)\r\n                    var result1\r\n                    if(result.flag==='1')\r\n                        result1 = await adminUser(userName,password)\r\n                    console.log(result1)\r\n                    if(result.flag==='1'&&result1.flag===1){\r\n                        message.success('注册成功')\r\n                        var user = result1.userinfo // 保存在内存中\r\n                        User.user = user\r\n                        storageUtils.saveUser(user) // 保存到local中\r\n                        this.props.history.replace('/bbs1/home')\r\n                    }else if(result.flag==='1'&&result1.flag!==1){\r\n                        message.error(\"注册失败\")\r\n                    }\r\n                }else{\r\n                    message.error(\"数据格式错误，请重新填写\")\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    validatePwd = (rule, value, callback) => {\r\n        if(!value) {\r\n            callback('密码必须输入')\r\n        } else if (value.length<4) {\r\n            callback('密码长度不能小于4位')\r\n        } else if (value.length>12) {\r\n            callback('密码长度不能大于12位')\r\n        } else if (!/^[a-zA-Z0-9_]+$/.test(value)) {\r\n            callback('密码必须是英文、数字或下划线组成')\r\n        } else {\r\n            callback() // 验证通过\r\n        }\r\n    }\r\n\r\n    render () {\r\n        const form = this.props.form\r\n        const { getFieldDecorator } = form;\r\n\r\n        if(!User.user&&User.user.id){\r\n            return <Redirect to='/'/>\r\n        }\r\n        return (\r\n          <div className=\"login\">\r\n              <header className=\"login-header\">\r\n                  <h1>BBS</h1>\r\n              </header>\r\n              <section className=\"login-content\">\r\n                  <h2>用户注册</h2>\r\n                  <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                      <Item>\r\n                          {\r\n                              getFieldDecorator('userName', {\r\n                                  rules: [\r\n                                      { required: true, whitespace: true, message: '用户名必须输入' },\r\n                                      { min: 4, message: '用户名至少4位' },\r\n                                      { max: 12, message: '用户名最多12位' }\r\n                                  ]\r\n                              })(\r\n                                <Input\r\n                                  prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                  placeholder=\"用户名\"\r\n                                />\r\n                              )\r\n                          }\r\n                      </Item>\r\n                      <Item>\r\n                          {\r\n                              getFieldDecorator('password', {\r\n                                  rules: [\r\n                                      {\r\n                                          validator: this.validatePwd\r\n                                      }\r\n                                  ]\r\n                              })(\r\n                                <Input\r\n                                  prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                  type=\"password\"\r\n                                  placeholder=\"密码\"\r\n                                />\r\n                              )\r\n                          }\r\n                      </Item>\r\n                      <Item>\r\n                          {\r\n                              getFieldDecorator('password2', {\r\n\r\n                              })(\r\n                                <Input\r\n                                  prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                  type=\"password\"\r\n                                  placeholder=\"再次确认密码\"\r\n                                />\r\n                              )\r\n                          }\r\n                      </Item>\r\n                      <Item>\r\n                          <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                              注册\r\n                          </Button>\r\n                      </Item>\r\n                  </Form>\r\n              </section>\r\n          </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrapLogin = Form.create()(Login)\r\nexport default WrapLogin\r\n","import React, { Component } from 'react';\r\nimport {BrowserRouter, Route, Switch} from 'react-router-dom'\r\n\r\nimport Admin from './components/admin/admin'\r\nimport Home from './components/home/home'\r\nimport Login from './components/login/login'\r\n\r\nexport default class App extends Component {\r\n    render() {\r\n        return (\r\n            <BrowserRouter>\r\n                <Switch>\r\n                  <Route path='/bbs1/login' component={Login}></Route>\r\n                  <Route path='/bbs1/home' component={Home}></Route>\r\n                  <Route path='/' component={Admin}></Route>\r\n                </Switch>\r\n            </BrowserRouter>\r\n        );\r\n    }\r\n}\r\n","/*\r\n入口js\r\n */\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport StorageUtils from './utils/storageUtils'\r\nimport User from './utils/users'\r\nimport App from './App'\r\n\r\nconst user = StorageUtils.getUser()\r\nUser.user = user\r\n\r\n// 将App组件标签渲染到index页面的div上\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}